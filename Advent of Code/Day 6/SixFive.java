
import java.awt.RenderingHints;
import java.util.Map;
import java.util.HashMap;
import java.util.Set;
import java.util.HashSet;
import java.util.Collections;


public class SixFive {
    static Map<Integer, int[]> directions = Map.of(
        0, new int[]{-1, 0}, // Up
        1, new int[]{0, 1}, // Right
        2, new int[]{1, 0}, // Down
        3, new int[]{0, -1} // Left
    );

    static char[][] input;

    // static final String inputString = """
    //     ....#.....
    //     .........#
    //     ..........
    //     ..#.......
    //     .......#..
    //     ..........
    //     .#..^.....
    //     ........#.
    //     #.........
    //     ......#...
    // """;

    static final String inputString = """
        #.....#.........#.........................#...#....................#......#.......#...........#........#..........................
        ..................#......#..................................#..................#....#...............#.#....................#.....#
        ..............#...........#......#.#.......................................#..................#......#............................
        ##...............................#..........#...................#.......#................................................#........
        #.....................#.......##................#...#..........#............................................#...#....#............
        ........#........#.............#...............#...##...................#...........#...........#.......#...........##.#...#.#....
        ................................................#....................................................#.#..........................
        .........#....#.....................................................................##......#.....#........#...............#......
        .............................#.....#.........#......................#...#................#.#..........#...........................
        ........................................#.........................................................................#...............
        .........................................#.......#.............#.#.........................#....#.....#...........#...............
        ...#............##...................................#...........#........................................#..................#....
        ....#.................#.......#............#.....#...........#................................#.#.#...........................#...
        ...#................................................................#.......................#.#........................#..#...#...
        ............................#......#.......#...............................................................................#....#.
        .......................................................#.............................#...#.......#.............#............#.....
        .....................................................................#......................................#.................##..
        ......#.................#......................................................#................#.................................
        ...............................................................................#...............#............................#.....
        ........................................................#......................##..................#........#.....................
        .#.................................#....#........#..#........#.................................#...............#..........#.#.....
        .................#................#...................#.#.....#................#..................#.........#.....................
        ...............#........................................................................#............#..........#.................
        ....................#..................#...........#................................#.....................#...#......#............
        .............#..#..................................#..............................#...............................#...#......#...#
        ..................#.............................................................#...............................#......#..........
        ................................................................#....#..............#.............................#...............
        .............#............#............................#...#........#...#.........................##..............................
        ....................................#....#.............#...#....#..........................#..................#.#............#....
        .......................#........................................................................................#.................
        ........#..................................#..#.........#.......................................#......#..............#...........
        ..........#............#............#..................#.......#..........#...................................#...........#.......
        ....#..............................#.....#...........##...#.....................#...........................#..........#..........
        ................................#..#.................................................................#...#...................#....
        ..#....................#..........................................................................#...............................
        ..................#........................#.......#..#......................................................................#....
        .#.....#......................#.....................................#.........................................#...................
        ..#....#...........................................#..........................................................................#...
        ..#.....#........................................................................#........#.#.............................#.......
        ................#......................................#...............#....................................#..........#..........
        ....................................#........................##.............................#..........................#........#.
        .#..............#..............................#......................................................#...........................
        ...#.#......................#.................#..................................#...........................#....................
        ..#....#..........................................#...#.......#..............................................#....................
        .......#.................#............................#..................................................#..#....................#
        .....##.#...........#...........................................#.....................................................#...........
        ................#.#........................................................................#..........#..#....#.##................
        ..........#........#............................................#.#......................................#.............#..........
        ............................................................#..........................................#..........................
        .......#........#.................#....................................................................#..........................
        ........................................................#..........................#..............#...............................
        .............#.#....................................#.................##............#.#.............................#..........#..
        .##.............................................^........#...................#.....#...................................#..........
        ...............#..#..#................................................................#...........................#...............
        .#.......##...........#.........#..................#......#..........#...#....#...................#...............................
        ....#................................................................#...................#........................................
        .........#............#..#......................................................#..#..............................................
        ...#.............................................................#......#....#....................................#...#....#......
        .....#.........#.................#....................#..................#..#.#.............#......#.....................#........
        ...........#.......#.##.#......#..#.............................#...........#..............................................#......
        ................................................................................................#.#......#......................#.
        ##..................................##....#.................#...............##....................................................
        .....#.............................#.............................................#................#.....................#.........
        ............#..............................#.....................#...............#..#....#....#...................................
        .........#.........................#...#................................................#........................................#
        .#..........................................#.......#.....................................................#..............#...#....
        #.........#...........#.............#..........................#........................................#.........................
        .......................................................................#.............................................#............
        ....#..............#..#......................................................#..........................................#....#....
        ........#...................................#...#................#.........................................................#...#..
        .........................................................#..#..#..#..........#...........#...........#............#...............
        ..............................................##......#.................#..............................................#..........
        .............................#..........#......#.....#....#.............#..............................................#...#..#...
        ......................................##......#.....................................#.......#....................#................
        ...................................................................................................#..............................
        .................................#..................................................................................#.............
        ........#...................................................................#...................##............#...................
        ...............................#..................................................................................................
        ...............................#...........................................................#...............##..............#......
        ........................................................................#..........#..................................#...........
        ................#.................................................................................................................
        ...#.................#..........#...........#...................................#......................#..........................
        .......................#..........................................................#.............#.............#..........#........
        ..........#..........#.#.................................#........#.............#..#..........................#........#.........#
        .................#.........#.#........................#...#.............................................................#......#..
        ......#.....................................................................#.....#...............#...............#....#..........
        ......#...##....#..#.......................................##......#......#....#..............#............#....................#.
        .#..........#........#...#........##..............#....#...........................#.....#................#...................#...
        .........................#........................................................................................................
        ..........................#.......................#.........#................................................#.#...........#......
        ......#...#.....#..........#....................#..................................#...#.................................#........
        .......................................................#............................#.....................#.#.................#...
        ..............#...............#......................#......#...................#.....................#.........#................#
        ....#.........#...............................................................#.......#.......#...........#.................#.....
        .......................#.........................#....................................#...........................................
        ...............#.................#..........#........................#...##.......................................................
        ....##..................#..#..................................................................................#.................#.
        ..................#.............#......................#...............#................#.#.......................................
        ........................#....#................................................#...#..........#....#.......#.......................
        .........................................................#..............#.............#.#.......#..................#......#...#...
        ...........#...........................#.........#..................................#.....................................#.......
        .#..........................................#................................................................#...........#........
        ..................................##....................#..........#..............#..........#............#.....#.................
        ##..#..#....#.........................................................#...............#...................................#.......
        ....#.#...........#............................#....#........#......#.............................................................
        #....#.........................#.............#.............................................................#.....#..#.............
        ............................#......#................#...............................................#.....#............#..........
        ........................#.............#..................#........................................................................
        ..#.............#........................................#.................................................#......................
        ...................#...................#..........#..#.............................................#...........#...#............#.
        ....#...#..........................##...#...............#....#.....................................#............#.................
        ..............................#..............................................................###..................................
        .................#......................................#.......................##.#............#.................................
        ............#.........................................#......##.....................#............#................................
        ....................#..#.............................#...#......................................#....................#.#........#.
        ....#...........#...........................................#....................................................#................
        ............#.....#..................................##.........#........#.....................................#..................
        ......#..............#..................................#...#.......#.............................................................
        ..........#.................#.......#.........................................................................#...........#.......
        ...........#..............#................#.....##.#............#........#.......................................................
        ................#.......................#.........................................................................#...........#...
        ..............................#............................................#.......#..............................................
        ..............#..............................#......#..................#....#.....#.................................#........#....
        ....................##..........#...#..#................#............#.......................#.................................#..
        ........................##.......#..................#.......#.....................#................#.....................#.....#..
        ..............#.............#...#......#.........#.................##..#...........#...........#.........................##.......
        #........#...........#........#..#............#...........#....#....#......##..............................................#......
        ........................................#.....................#....................................#........#......#......#.......
        .............#........#.............#...........#..#..#.......................................................#......#............
        #...................#.#........................................#..................................#...#...........................
    """;

    private static void convertInputStringToCharArray() {
        String[] splitLines = inputString.split("\n");
        input = new char[splitLines.length][];

        for (int i = 0; i < splitLines.length; i++) {
            input[i] = splitLines[i].toCharArray();
        }
    }

    static int maxRows;
    static int maxCols;

    public static void simulateGuardPath() {
        // I want to search the previous path and see if there is a coordinate in the new direction in visited
        // Afterwards I can check if there is an obstacle in the way if there is a coordinate in that section

        maxRows = input.length;
        maxCols = input[0].length;
        
        // Find the starting position
        int startRow = -1;
        int startCol = -1;
        for (int row = 0; row < maxRows; row++) {
            for (int col = 0; col < maxCols; col++) {
                if (input[row][col] == '^') {
                    startRow = row;
                    startCol = col;
                    break;
                }
            }
            if (startRow != -1) break;
        }
        
        if (startRow == -1 || startCol == -1) {
            System.out.println("No guard found on the map");
            return;
        }
        
        System.out.println("Guard starting at: Row " + startRow + ", Col " + startCol);
        
        // Track visited positions
        Set<Point> visited = new HashSet<>();
        
        // Starting position and direction
        int row = startRow;
        int col = startCol;
        int direction = 0; // Start facing up
        
        // Add starting position
        visited.add(new Point(row, col));
        
        // Main simulation loop
        while (true) {
            // Calculate next position
            int[] dir = directions.get(direction);
            int newRow = row + dir[0];
            int newCol = col + dir[1];

            // See if there is a visited square if the guard were to rotate to the RHS
            int tempRow = row;
            int tempCol = col;
            int[] tempDirection = directions.get((direction + 1 ) % 4);

            // I don't want to leave the map if there is something on the RHS
            while (Math.min(tempRow, tempCol) >= 0 || tempCol < maxCols || tempRow < maxRows) {

                tempRow += tempDirection[0];
                tempCol += tempDirection[1];

                Point tempCoordinates = new Point(tempRow, tempCol);
                if (visited.contains(tempCoordinates)) {
                    Point currentCoordinates = new Point(row, col); 
                    checkIfObjectInWayOfPath(currentCoordinates, tempCoordinates);
                }
            }
            
            // Check if we're leaving the map
            if (newRow < 0 || newRow >= maxRows || newCol < 0 || newCol >= maxCols) {
                System.out.println("Guard left the map at: Row " + newRow + ", Col " + newCol);
                break;
            }
            
            // Check if there's an obstacle
            if (input[newRow][newCol] == '#') {
                // Turn right
                direction = (direction + 1) % 4;
            } else {
                // Move forward
                row = newRow;
                col = newCol;
                visited.add(new Point(row, col));
            }
        }
        
        System.out.println("Total distinct positions visited: " + visited.size());
    }

    public static boolean checkIfObjectInWayOfPath(curCoords, tempCoords) {
        
    }

    public static void main(String[] args) {
        convertInputStringToCharArray();
        simulateGuardPath();
    }
}

class Point {
    private final int x;
    private final int y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() { return x; }
    public int getY() { return y; }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        Point point = (Point) o;
        return x == point.x && y == point.y;
    }

    @Override
    public int hashCode() {
        return 31 * x + y;
    }
} 
